/*
 * Copyright (c) delight.im <info@delight.im>
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";function MediaPlayer(){this._targetElement=null,this.setTargetElement=function(e){if(!("object"==typeof e&&e instanceof HTMLMediaElement))throw new MediaPlayer.InvalidArgumentElementException("Target element must be an instance of `HTMLMediaElement`");if(!(e instanceof HTMLVideoElement||e instanceof HTMLAudioElement))throw new MediaPlayer.InvalidArgumentElementException("Target element must be a video or audio element");this._targetElement=e},this._hasTargetElement=function(){return"object"==typeof this._targetElement&&null!==this._targetElement},this._createObjectUrlFromFile=function(e){if(window.webkitURL&&window.webkitURL.createObjectURL)return window.webkitURL.createObjectURL(e);if(window.URL&&window.URL.createObjectURL)return window.URL.createObjectURL(e);throw new MediaPlayer.BrowserNotSupportedException("Missing support for `Window#URL.createObjectURL`")},this._isMediumPlayable=function(e){if(""===e)return!0;var t=this._targetElement.canPlayType(e);return"probably"===t||"maybe"===t},this._loadFile=function(e){if(!this._hasTargetElement())throw new MediaPlayer.MissingTargetElementException;if(!this._isMediumPlayable(e.type))throw new MediaPlayer.UnsupportedFormatException;this._targetElement.src=this._createObjectUrlFromFile(e)},this.load=function(e){if("object"!=typeof e)throw new MediaPlayer.InvalidInputException("Input must be an object");if(!(e instanceof File))throw new MediaPlayer.InvalidInputException("Input must be of type `File`");this._loadFile(e)},this.play=function(){this.resume()},this.resume=function(){if(!this._hasTargetElement())throw new MediaPlayer.MissingTargetElementException;this._targetElement.play()},this.pause=function(){if(!this._hasTargetElement())throw new MediaPlayer.MissingTargetElementException;this._targetElement.pause()},this.stop=function(){if(!this._hasTargetElement())throw new MediaPlayer.MissingTargetElementException;this.pause(),this._targetElement.currentTime=0},this.isPlaying=function(){return!this._targetElement.paused&&!this.hasEnded()},this.togglePlaying=function(){this.isPlaying()?this.pause():this.resume()},this.hasEnded=function(){return this._targetElement.ended},this.seek=function(e){this._targetElement.currentTime+=e},this.seekTo=function(e){this._targetElement.currentTime=e},this.getSpeed=function(){return this._targetElement.playbackRate},this.increaseSpeed=function(e){if(!this._hasTargetElement())throw new MediaPlayer.MissingTargetElementException;return e=e||.5,this._targetElement.playbackRate+=e,this._targetElement.playbackRate},this.decreaseSpeed=function(e){if(!this._hasTargetElement())throw new MediaPlayer.MissingTargetElementException;return e=e||.5,this._targetElement.playbackRate-=e,this._targetElement.playbackRate},this.getVolume=function(){return this._targetElement.volume},this.increaseVolume=function(e){if(!this._hasTargetElement())throw new MediaPlayer.MissingTargetElementException;return e=e||.1,this._targetElement.volume=Math.min(this._targetElement.volume+e,1),this._targetElement.volume},this.decreaseVolume=function(e){if(!this._hasTargetElement())throw new MediaPlayer.MissingTargetElementException;return e=e||.1,this._targetElement.volume=Math.max(this._targetElement.volume-e,0),this._targetElement.volume},this.getElapsedTime=function(){if(!this._hasTargetElement())throw new MediaPlayer.MissingTargetElementException;return this._targetElement.currentTime},this.getRemainingTime=function(){if(!this._hasTargetElement())throw new MediaPlayer.MissingTargetElementException;return this._targetElement.duration-this._targetElement.currentTime},this.getTotalTime=function(){if(!this._hasTargetElement())throw new MediaPlayer.MissingTargetElementException;return this._targetElement.duration},this.getProgress=function(){if(!this._hasTargetElement())throw new MediaPlayer.MissingTargetElementException;return this._targetElement.currentTime/this._targetElement.duration}}MediaPlayer.InvalidInputException=function(e){this.reason=e},MediaPlayer.BrowserNotSupportedException=function(e){this.reason=e},MediaPlayer.MissingTargetElementException=function(){},MediaPlayer.InvalidArgumentElementException=function(e){this.reason=e},MediaPlayer.UnsupportedFormatException=function(){};
